"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[690],{3149:function(t,e,l){l.d(e,{Z:function(){return c}});l(7658);var i,a,r=l(588),s={data(){return{}},methods:{async onSubmit(t,e){this.id?(console.log(this.form),await(0,r.ht)(t,this.form),this.$mes()):(await(0,r.k4)(t,this.form),this.$mes()),this.$router.push({path:e})},async fetchId(t){return new Promise((async e=>{const l=await(0,r.qC)(t,this.id);this.form=l,e(l)}))},async findCategoryList(t,e=!0){const l=await(0,r.mY)(t,{isOnlyParent:e});if(this.tableData)this.tableData=l;else if(this.formFields)for(let i in this.formFields){const t=this.formFields[i];if(t.hasOwnProperty("options")&&!t.options){t.options=l;break}}},async remove(t,e){await(0,r.uu)(t,e),this.findCategoryList(this.listUrl,!1),this.$mes()}}},o=s,n=l(1001),p=(0,n.Z)(o,i,a,!1,null,null,null),c=p.exports},6059:function(t,e,l){l.r(e),l.d(e,{default:function(){return Z}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e("h3",[t._v(t._s(t.id?"编辑":"新建")+"英雄分类")]),e("IForm",{attrs:{formFields:t.formFields,form:t.form,inline:!0,"label-position":"right"},on:{onSubmit:t.submit}},[e("Skill",{attrs:{form:t.form}}),e("Partner",{attrs:{form:t.form}})],1)],1)},a=[],r=l(5256),s=l(3149),o=[{type:"input",label:"名称",value:"name",attrs:{placeholder:"请输入内容"}},{type:"upload",label:"图标",value:"avatar",attrs:{placeholder:"请输入内容"},url:"http://localhost:803/hero/upload"},{type:"upload",label:"英雄背景",value:"banner",attrs:{placeholder:"请输入内容"},url:"http://localhost:803/hero/upload"},{type:"input",label:"称号",value:"title",attrs:{placeholder:"请输入内容"}},{type:"select",label:"类型",value:"categories",attrs:{placeholder:"请选择",multiple:!0},options:""},{type:"rate",label:"困难",value:["scopes","difficult"]},{type:"rate",label:"技能",value:["scopes","skills"]},{type:"rate",label:"攻击",value:["scopes","attach"]},{type:"rate",label:"生存",value:["scopes","dead"]},{type:"select",label:"顺风出装",value:"items1",attrs:{placeholder:"请选择",multiple:!0},options:""},{type:"select",label:"逆风出装",value:"items2",attrs:{placeholder:"请选择",multiple:!0},options:""},{type:"input",label:"使用技巧",value:"useTips",attrs:{placeholder:"请输入内容",type:"textarea"}},{type:"input",label:"对抗技巧",value:"battleTips",attrs:{placeholder:"请输入内容",type:"textarea"}},{type:"input",label:"团队思路",value:"teamTips",attrs:{placeholder:"请输入内容",type:"textarea"}}],n=(l(7658),function(){var t=this,e=t._self._c;return e("div",[e("hr"),e("div",[e("el-button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.form.skills.push({})}}},[t._v("添加技能")])],1),e("el-row",t._l(t.form.skills,(function(l,i){return e("el-col",{key:i},[e("el-form-item",{attrs:{label:"名称",prop:"name"}},[e("el-input",{model:{value:l.name,callback:function(e){t.$set(l,"name",e)},expression:"item.name"}})],1),e("el-form-item",{attrs:{label:"图标",prop:"icon"}},[e("myUpload",{attrs:{url:"http://localhost:803/hero/upload"},model:{value:l.icon,callback:function(e){t.$set(l,"icon",e)},expression:"item.icon"}})],1),e("el-form-item",{attrs:{label:"描述",prop:"description"}},[e("el-input",{attrs:{type:"textarea"},model:{value:l.description,callback:function(e){t.$set(l,"description",e)},expression:"item.description"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.form.skills.splice(i,1)}}},[t._v("删除")])],1)],1)})),1)],1)}),p=[],c=l(8756),u={props:{form:{type:Object,default:()=>({})}},components:{myUpload:c.Z}},m=u,d=l(1001),f=(0,d.Z)(m,n,p,!1,null,null,null),h=f.exports,y=function(){var t=this,e=t._self._c;return e("div",[e("hr"),e("div",[e("el-button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.form.partners.push({})}}},[t._v("添加英雄关系")])],1),e("el-row",t._l(t.form.partners,(function(l,i){return e("el-col",{key:i},[e("el-form-item",{attrs:{label:"英雄",prop:"hero"}},[e("el-select",{attrs:{filterable:""},model:{value:l.hero,callback:function(e){t.$set(l,"hero",e)},expression:"item.hero"}},t._l(t.tableData,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1),e("el-form-item",{attrs:{label:"描述",prop:"description"}},[e("el-input",{attrs:{type:"textarea"},model:{value:l.description,callback:function(e){t.$set(l,"description",e)},expression:"item.description"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.form.partners.splice(i,1)}}},[t._v("删除")])],1)],1)})),1)],1)},b=[],v={props:{form:{type:Object,default:()=>({})}},data(){return{tableData:[]}},components:{myUpload:c.Z},mixins:[s.Z],created(){this.findCategoryList("hero/list",!1)}},k=v,x=(0,d.Z)(k,y,b,!1,null,null,null),_=x.exports,g={props:["id"],data(){return{form:{name:"",avatar:void 0,scopes:{difficult:0,skills:0,attach:0,dead:0},skills:[],partners:[]},formFields:[]}},components:{IForm:r.Z,Skill:h,Partner:_},mixins:[s.Z],created(){this.formFields=o,this.id&&this.fetchId("hero/list/").then((()=>{})),this.findCategoryList("category/list",!1),this.findCategoryList("items/list",!1),this.findCategoryList("items/list",!1)},methods:{submit(){const t=this.id?"hero/edit":"hero/create";this.onSubmit(t,"/heros/list")}}},w=g,C=(0,d.Z)(w,i,a,!1,null,null,null),Z=C.exports}}]);
//# sourceMappingURL=690.5b28edd3.js.map